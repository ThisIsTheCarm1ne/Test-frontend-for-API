<template>
  <!-- Sidebar (visible on screens wider than 720px or when isNavOpen is true) -->
  <div v-if="isNavOpen || windowWidth > 720" class="sidenav">
    <div>
      <!-- Close button (visible on screens 720px or smaller) -->
      <button v-if="windowWidth <= 720" @click="toggleNav" class="close-btn">
        X
      </button>
      <div>
        <h1>Demo Test</h1>
      </div>
      <div class="list">
        <button class="list-element">
          <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 11.5527C14.2091 11.5527 16 9.76187 16 7.55273C16 5.3436 14.2091 3.55273 12 3.55273C9.79086 3.55273 8 5.3436 8 7.55273C8 9.76187 9.79086 11.5527 12 11.5527Z" stroke="white" stroke-opacity="0.45" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M16.5 21.6949C17.888 21.445 18.9884 21.0643 19.5 20.5527C19.5719 19.9059 19.5 18.8861 19.5 18.8861C19.5 18.002 19.0786 17.1542 18.3284 16.5291C15.9595 14.5549 8.04053 14.5549 5.67158 16.5291C4.92143 17.1542 4.5 18.002 4.5 18.8861C4.5 18.8861 4.42813 19.9059 4.5 20.5527C5.01157 21.0643 6.11198 21.445 7.5 21.6949" stroke="white" stroke-opacity="0.45" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <p>Profile</p>
        </button>
        <button class="list-element">
          <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M12 3.55273C7.86586 3.55273 4.18305 6.86007 3.16847 10.802C3.03081 11.3368 2.48563 11.6588 1.95078 11.5212C1.41592 11.3835 1.09394 10.8383 1.2316 10.3035C2.43723 5.61926 6.81495 1.55273 12 1.55273C18.0751 1.55273 23 6.4776 23 12.5527C23 18.6279 18.0751 23.5527 12 23.5527C6.67713 23.5527 2.2393 19.773 1.22002 14.7517C1.11016 14.2104 1.45986 13.6826 2.0011 13.5727C2.54235 13.4629 3.07018 13.8126 3.18005 14.3538C4.01385 18.4614 7.64704 21.5527 12 21.5527C16.9706 21.5527 21 17.5233 21 12.5527C21 7.58217 16.9706 3.55273 12 3.55273Z" fill="white" fill-opacity="0.45"/>
            <circle cx="12" cy="12.5527" r="6" stroke="white" stroke-opacity="0.45" stroke-width="2"/>
            <circle cx="12" cy="12.5527" r="1" stroke="white" stroke-opacity="0.45" stroke-width="2"/>
          </svg>
          <p>Vehicles</p>
        </button>
        <button class="list-element">
          <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 12.5528V16.5528C3.00036 16.9035 3.09294 17.2479 3.26846 17.5516C3.44398 17.8552 3.69626 18.1074 4 18.2828L11 22.2828C11.304 22.4583 11.6489 22.5507 12 22.5507C12.3511 22.5507 12.696 22.4583 13 22.2828L20 18.2828C20.3037 18.1074 20.556 17.8552 20.7315 17.5516C20.9071 17.2479 20.9996 16.9035 21 16.5528V8.55276C20.9996 8.20203 20.9071 7.85757 20.7315 7.55392C20.556 7.25027 20.3037 6.99812 20 6.82276L13 2.82276C12.696 2.64722 12.3511 2.55481 12 2.55481C11.6489 2.55481 11.304 2.64722 11 2.82276L4 6.82276C3.69626 6.99812 3.44398 7.25027 3.26846 7.55392C3.09294 7.85757 3.00036 8.20203 3 8.55276V9.55276M15 12.5528C15 14.2096 13.6569 15.5528 12 15.5528C10.3431 15.5528 9 14.2096 9 12.5528C9 10.8959 10.3431 9.55276 12 9.55276C13.6569 9.55276 15 10.8959 15 12.5528Z" stroke="white" stroke-opacity="0.45" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <p>Setting</p>
        </button>
      </div>
    </div>
    <div class="wave">
      <svg width="256" height="235" viewBox="0 0 256 235" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path opacity="0.1" d="M-308.435 5.30607C-190.954 -35.8053 -235.968 229.774 -155.196 278.665C-57.1787 337.992 -28.4582 40.7883 20.6773 110.931C84.5851 202.134 88.0087 192.521 199.467 136.799C310.925 81.0774 391 212.444 391 212.444M-308.625 17.3232C-187.784 -18.412 -228.107 222.627 -148.983 272.909C-49.5705 336.094 -20.85 42.749 28.7926 112.385C92.4468 202.008 91.686 202.514 202.7 145.717C314.159 88.5407 390.366 214.974 390.366 214.974M-308.879 29.2771C-184.741 -1.082 -220.372 215.543 -142.833 267.154C-41.9624 334.26 -13.1785 44.7097 36.8446 113.84C100.245 201.945 95.3633 212.57 205.934 154.635C317.392 96.0672 389.669 217.504 389.669 217.504M-309.069 41.2943C-181.634 16.3745 -212.637 208.586 -136.62 261.398C-34.3544 332.426 -5.38029 46.6071 44.9598 115.231C108.297 201.628 99.1039 222.5 209.231 163.553C320.689 103.531 389.098 220.034 389.098 220.034M-309.323 53.2482C-178.527 33.7045 -204.965 201.692 -130.47 255.642C-26.8097 330.718 2.35452 48.5046 53.075 116.686C116.159 201.502 102.844 232.557 212.464 172.471C323.922 110.994 388.464 222.627 388.464 222.627M-309.513 65.2654C-175.421 51.0978 -197.294 194.861 -124.32 249.887C-19.2016 329.074 10.0261 50.4653 61.127 118.141C124.02 201.376 106.522 242.55 215.698 181.389C327.156 118.52 387.767 225.157 387.767 225.157M-309.703 77.2193C-172.314 68.4278 -189.622 188.03 -118.107 244.068C-11.7204 327.492 17.6974 52.426 69.2421 119.596C131.945 201.249 110.262 252.543 218.994 190.37C330.453 126.047 387.196 227.75 387.196 227.75M-309.957 89.2364C-169.271 85.821 -182.014 181.326 -111.957 238.376C-4.23915 325.974 25.3689 54.3867 77.294 121.05C139.744 201.122 113.94 262.6 222.164 199.288C333.623 133.51 386.499 230.28 386.499 230.28M-310.147 101.19C-166.164 103.214 -174.406 174.622 -105.743 232.557C3.24221 324.52 33.0405 56.3474 85.4094 122.442C147.605 200.996 117.807 272.783 225.461 208.143C337.046 141.163 385.928 232.747 385.928 232.747M-310.401 113.207C-163.058 120.608 -166.925 167.98 -99.5936 226.801C10.66 323.128 40.7118 58.3081 93.5245 123.896C155.467 200.869 121.548 282.776 228.695 217.124C340.28 148.753 385.231 235.34 385.231 235.34M-310.591 125.161C-159.951 137.938 -159.38 161.339 -93.3803 221.046C18.0145 321.8 48.3834 60.332 101.576 125.351C163.329 200.743 125.225 292.769 231.928 226.042C343.513 156.216 384.597 237.87 384.597 237.87M-310.844 137.179C-156.908 155.331 -151.962 154.825 -87.2305 215.353C25.2422 320.598 55.9915 62.2927 109.628 126.806C171.064 200.68 128.902 302.826 235.162 234.96C346.747 163.743 383.963 240.4 383.963 240.4M-311.035 149.132C-153.801 172.661 -144.481 148.247 -81.0172 209.535C32.5333 319.333 63.663 64.2534 117.744 128.197C178.989 200.553 132.643 312.819 238.459 243.878C350.044 171.206 383.329 242.93 383.329 242.93M-311.225 161.15C-150.631 190.117 -137 141.732 -74.804 203.779C39.7608 318.132 71.3343 66.2141 125.922 129.652C186.85 200.427 136.447 322.749 241.755 252.796C353.277 178.669 382.758 245.459 382.758 245.459M-311.478 173.104C-147.588 207.447 -129.645 135.218 -68.6541 198.023C46.8618 316.993 78.9425 68.238 133.974 131.107C194.585 200.364 139.997 332.552 244.989 261.714C356.384 185.943 382.124 247.989 382.124 247.989M-311.669 185.121C-144.481 224.841 -122.291 128.767 -62.5041 192.268C53.8994 315.981 86.5507 70.262 142.026 132.561C202.384 200.3 143.675 342.609 248.159 270.632C359.554 193.406 381.364 250.583 381.364 250.583M-311.922 197.075C-141.438 242.171 -115 122.252 -56.3544 186.512C60.8099 314.906 94.0952 72.2226 150.078 133.953C210.118 200.174 147.288 352.539 251.392 279.55C362.787 200.933 380.729 253.113 380.729 253.113M-312.112 209.092C-138.268 259.564 -107.645 115.801 -50.1411 180.757C67.784 313.957 101.767 74.2466 158.193 135.408C217.917 200.111 151.029 362.595 254.689 288.468C366.084 208.396 380.159 255.642 380.159 255.642M-312.303 221.109C-135.161 277.02 -100.291 109.413 -43.9279 175.064C74.6312 313.072 109.375 76.3338 166.308 136.926C225.715 200.174 154.769 372.652 257.922 297.449C369.317 215.923 379.525 258.236 379.525 258.236M-312.556 233.063C-132.118 294.35 -93.0634 102.898 -37.7781 169.245C81.3516 312.123 116.919 78.2945 174.36 138.317C233.45 200.047 158.447 382.581 261.156 306.367C372.487 223.449 378.827 260.766 378.827 260.766M-312.746 245.08C-129.011 311.68 -85.8357 96.51 -31.5648 163.49C88.0721 311.238 124.464 80.4449 182.539 139.772C241.248 200.111 162.251 392.638 264.516 315.285C375.847 230.912 378.32 263.295 378.32 263.295M-313 257.034C-125.905 329.074 -78.6714 90.0587 -25.4149 157.734C94.6659 310.415 132.136 82.4056 190.591 141.163C249.046 199.921 165.928 402.631 267.686 324.203C379.018 238.439 377.623 265.825 377.623 265.825" stroke="white" stroke-width="0.75" stroke-miterlimit="10"/>
      </svg>
    </div>
  </div>
  <!-- Hamburger button (visible on screens 720px or smaller) -->
  <button v-if="windowWidth <= 720" @click="toggleNav" class="hamburger-btn">
    â˜°
  </button>
  <!-- Backdrop when the sidenav is visible -->
  <div v-if="isNavOpen && windowWidth <= 720" class="backdrop"></div>
</template>

<script lang="ts">
import { ref, onMounted, onUnmounted, watch } from 'vue';

export default{
  setup() {
    const isNavOpen = ref(false);
    const windowWidth = ref(window.innerWidth);

    const toggleNav = () => {
      isNavOpen.value = !isNavOpen.value;
    };

    // Function to update the window width
    const updateWidth = () => {
      windowWidth.value = window.innerWidth;
    };

    // Watch the window width and close the nav if the screen is resized to larger than 720px
    onMounted(() => {
      window.addEventListener('resize', updateWidth);
    });

    // Clean up the event listener on component unmount
    onUnmounted(() => {
      window.removeEventListener('resize', updateWidth);
    });

    // Disable scroll when sidenav is open
    watch(isNavOpen, (newValue) => {
      if (newValue) {
        document.body.style.overflow = 'hidden'; // Disable scroll
      } else {
        document.body.style.overflow = ''; // Enable scroll
      }
    });

    return {
      isNavOpen,
      toggleNav,
      windowWidth
    };
  }
};
</script>

<style scoped>
.hamburger-btn {
  background: 0;
  position: absolute;
  top: 2vw;
  left: 2vw;
  border-radius: 20px;
  border: 2px solid #E86E84;
  color: #E86E84;
  font-size: 2vw;
}
.close-btn {
  background: 0;
  position: absolute;
  top: 2vw;
  left: 2vw;
  border-radius: 20px;
  border: 2px solid #E86E84;
  color: #E86E84;
  font-size: 2vw;
}
.sidenav {
  width: 256px;
  min-height: 100vh;
  height: 100%;
  background: #282828;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}
h1 {
  font-family: 'DM Sans';
  font-style: normal;
  font-weight: 700;
  font-size: 24px;
  line-height: 24px;
  color: #FFFFFF;
  margin-bottom: 10vh;
  margin-top: 3vh;
  text-align: center;
}
.list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.list-element {
  padding: 0px;
  padding-left: 2vw;
  width: 100%;
  height: 48px;

  font-family: 'DM Sans';
  font-style: normal;
  font-weight: 500;
  font-size: 16px;
  line-height: 20px;

  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: 20px;

  color: rgba(255, 255, 255, 0.45);
  background-color: inherit;

  border-width: 0;
}
.list-element:hover {
  border-left-width: 2px;
  border-color: #D90E32;
  background: rgba(255, 255, 255, 0.2);
  color: #FFFFFF;
}
svg {
  color: inherit;
}
.backdrop {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: #000000bf;
  z-index: 5;
}
@media screen and (max-width: 720px) {
  .sidenav {
    width: 40vw;
    position: absolute;
    top: 0;
    left: 0;
    z-index: 10;
  }
}
</style>
